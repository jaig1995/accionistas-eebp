<div class="flex flex-col flex-auto min-w-0">

    <!-- Main -->
  <div class="flex-auto p-6 sm:p-10">

    <div class="text-4xl font-extrabold tracking-tight leading-none">Seguridad > Usuarios y permisos</div><br>

      <mat-divider class="mt-6 mb-10"></mat-divider><br>

      <div class="w-80">
        <app-input-autocomplete [labelInput]="'Filtro General'" (accionista)="obtenerAccionista($event)"
            (valorInput)="applyFilter($event)" [asociados]="true" />
      </div><br>

    <table mat-table [dataSource]="datos" class="mat-elevation-z2">

        <ng-container matColumnDef="avatar">
            <th mat-header-cell *matHeaderCellDef></th>
            <td mat-cell *matCellDef="let element">
                <img
                    class="w-10 h-10 rounded-full"
                    src="/assets/images/avatars/{{element.codUsuario}}.jpg"
                    alt="User avatar">
            </td>
        </ng-container>

      <ng-container matColumnDef="codUsuario">
        <th mat-header-cell *matHeaderCellDef> CÓDIGO DE USUARIO </th>
        <td mat-cell *matCellDef="let element"> {{element.codUsuario}} </td>
      </ng-container>

      <ng-container matColumnDef="nombreUsuario">
        <th mat-header-cell *matHeaderCellDef> NOMBRES </th>
        <td mat-cell *matCellDef="let element"> {{ element.nombreUsuario ? element.nombreUsuario : element.razonSocial }} </td>
      </ng-container>

      <ng-container matColumnDef="apellidoUsuario">
        <th mat-header-cell *matHeaderCellDef> APELLIDOS </th>
        <td mat-cell *matCellDef="let element"> {{element.apellidoUsuario}}
        </td>
      </ng-container>

        <ng-container matColumnDef="email">
            <th mat-header-cell *matHeaderCellDef> EMAIL </th>
            <td mat-cell *matCellDef="let element"> {{element.email.toUpperCase()}}
            </td>
        </ng-container>

      <ng-container matColumnDef="permisos">
        <th mat-header-cell *matHeaderCellDef>  </th>
        <td mat-cell *matCellDef="let element">
          <a mat-button [color]="'accent'"
          [routerLink]="['/seguridad/permisos-usuarios/detalles/' + element.codUsuario ]">Ver detalle <mat-icon svgIcon="heroicons_outline:magnifying-glass-plus"></mat-icon>
          </a>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

      <!-- Row shown when there is no matching data. -->
      <tr class="mat-row" *matNoDataRow>
        <td class="mat-cell" colspan="4">No hay usuarios que coincidan con el código "{{input.value}}"</td>
      </tr>
    </table>

  </div>
</div>
